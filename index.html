<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>å¥åº·èŠ‚å¥ RUN â€” ç”»å¸ƒå¯ç©ä½é…ç‰ˆ</title>
  <style>
    :root{--bg:#eaf6f1;--panel:#ffffff;--accent:#2fb86a;--muted:#6e7b74}
    html,body{height:100%;margin:0;font-family:PingFang SC,Helvetica,Arial}
    .wrap{min-height:100%;display:flex;flex-direction:column;align-items:center;background:linear-gradient(180deg,var(--bg),#dff0e8);padding:12px}
    .stage{width:360px;max-width:94vw;height:600px;background:var(--panel);border-radius:12px;box-shadow:0 8px 20px rgba(0,0,0,.12);overflow:hidden;position:relative}
    .top{height:56px;display:flex;align-items:center;justify-content:space-between;padding:8px 12px}
    .logo{font-weight:700;color:var(--accent)}
    .badge{background:#f6fbf8;padding:6px 10px;border-radius:10px;font-size:13px}
    .playarea{position:relative;left:0;right:0;top:56px;height:444px;background:linear-gradient(180deg,#cff5dc,#b6efca)}
    .ground{position:absolute;left:0;right:0;bottom:0;height:110px;background:linear-gradient(180deg,#7fd292,#6fc686)}
    .runner{position:absolute;width:56px;height:56px;border-radius:10px;background:#fff;display:flex;align-items:center;justify-content:center;font-size:28px;box-shadow:0 6px 14px rgba(0,0,0,.12);left:150px;top:360px}
    .entity{position:absolute;width:44px;height:44px;border-radius:8px;display:flex;align-items:center;justify-content:center;font-size:20px}
    .good{background:#e9fff0;border:2px solid #c7f0d1}
    .bad{background:#fff0f0;border:2px solid #ffc6c6}
    .panel{position:absolute;left:10px;right:10px;bottom:12px;padding:8px;background:rgba(255,255,255,.92);border-radius:10px;display:flex;align-items:center;justify-content:space-between}
    .btn{background:var(--accent);color:#fff;padding:8px 12px;border-radius:10px;border:none;font-weight:600}
    .small{font-size:12px;color:var(--muted)}
    .hint{position:absolute;right:8px;top:64px;background:rgba(255,255,255,.9);padding:6px;border-radius:8px;font-size:12px}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="stage" id="stage">
      <div class="top">
        <div class="logo">å¥åº·èŠ‚å¥ RUN â€” ä½é…è¯•ç©</div>
        <div class="badge" id="energy">èƒ½é‡: 0</div>
      </div>
      <div class="playarea" id="area">
        <div class="hint">è§¦å±ï¼šå·¦å³æ»‘åŠ¨ / ä¸Šä¸‹æ»‘åŠ¨</div>
        <div id="runner" class="runner">ğŸƒ</div>
        <div id="e0" class="entity good" style="left:80px;top:-60px;display:none">ğŸ’§</div>
        <div id="e1" class="entity bad" style="left:150px;top:-60px;display:none">ğŸ”</div>
        <div id="e2" class="entity good" style="left:220px;top:-60px;display:none">ğŸ¥—</div>
        <div class="ground"></div>
      </div>
      <div class="panel">
        <div>
          <div class="small">ä»Šæ—¥è¿›åº¦</div>
          <div id="progress">0 / 1000 ç±³</div>
        </div>
        <div><button id="start" class="btn">å¼€å§‹</button></div>
      </div>
    </div>
  </div>
<script>
(function(){
  const lanesX=[80,150,220];
  const runner=document.getElementById('runner');
  const e0=document.getElementById('e0');
  const e1=document.getElementById('e1');
  const e2=document.getElementById('e2');
  const entities=[e0,e1,e2];
  const energyEl=document.getElementById('energy');
  const progressEl=document.getElementById('progress');
  const startBtn=document.getElementById('start');
  let lane=1,running=false,health=100,distance=0,energy=0,tickId=null,spawnCounter=0;
  function setRunnerLane(i){lane=Math.max(0,Math.min(2,i));runner.style.left=lanesX[lane]+'px';}
  setRunnerLane(1);
  function hideEntity(el){el.style.display='none';el.dataset.active='0';}
  function showEntity(el,isGood){el.style.display='flex';el.dataset.active='1';el.dataset.good=isGood?'1':'0';el.style.top='-60px';}
  function spawnRandom(){
    for(let el of entities){
      if(el.dataset.active!=='1'){
        const laneIdx=Math.floor(Math.random()*3);
        const isGood=Math.random()<0.6;
        el.className='entity '+(isGood?'good':'bad');
        el.textContent=isGood?(['ğŸ’§','ğŸ¥—','â˜€ï¸'][Math.floor(Math.random()*3)]):(['ğŸ”','ğŸŸ','ğŸ°'][Math.floor(Math.random()*3)]);
        el.style.left=lanesX[laneIdx]+'px';
        showEntity(el,isGood);
        el.dataset.lane=laneIdx;
        break;
      }
    }
  }
  function moveEntities(){
    entities.forEach(el=>{
      if(el.dataset.active==='1'){
        const y=parseFloat(el.style.top||'-60');
        const ny=y+28;
        el.style.top=ny+'px';
        if(ny>=340 && ny<=420){
          if(Number(el.dataset.lane)==lane){
            if(el.dataset.good==='1'){energy+=10;health=Math.min(100,health+6);}
            else health-=20;
            hideEntity(el);
          }
        }
        if(ny>520) hideEntity(el);
      }
    });
  }
  function tick(){
    if(!running) return;
    spawnCounter++;
    if(spawnCounter%6===0) spawnRandom();
    moveEntities();
    distance+=40;
    progressEl.textContent=distance+' / 1000 ç±³';
    energyEl.textContent='èƒ½é‡: '+energy;
    if(health<=0) stopRun('ä½“åŠ›è€—å°½');
    if(distance>=1000) stopRun('è¾¾æˆç›®æ ‡');
  }
  function startRun(){if(running)return;running=true;health=100;distance=0;energy=0;spawnCounter=0;entities.forEach(hideEntity);tickId=setInterval(tick,220);}
  function stopRun(reason){running=false;clearInterval(tickId);tickId=null;progressEl.textContent=distance+' / 1000 ç±³ â€” '+reason;energyEl.textContent='èƒ½é‡: '+energy+'ï¼ˆæœ¬æ¬¡ï¼‰';}
  let sx=0,sy=0;
  const area=document.getElementById('area');
  area.addEventListener('touchstart',e=>{const t=e.changedTouches[0];sx=t.clientX;sy=t.clientY;});
  area.addEventListener('touchend',e=>{const t=e.changedTouches[0],dx=t.clientX-sx,dy=t.clientY-sy;
    if(Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>20){if(dx>0)setRunnerLane(lane+1);else setRunnerLane(lane-1);}
    else if(Math.abs(dy)>20){if(dy<0){runner.style.top='300px';setTimeout(()=>runner.style.top='360px',180);}else{runner.style.top='380px';setTimeout(()=>runner.style.top='360px',120);}}
  });
  document.addEventListener('keydown',e=>{if(e.key==='ArrowLeft')setRunnerLane(lane-1);if(e.key==='ArrowRight')setRunnerLane(lane+1);if(e.key==='ArrowUp'){runner.style.top='300px';setTimeout(()=>runner.style.top='360px',180);}if(e.key==='ArrowDown'){runner.style.top='380px';setTimeout(()=>runner.style.top='360px',120);}});
  startBtn.addEventListener('click',()=>{if(!running)startRun();else stopRun('æ‰‹åŠ¨åœæ­¢');});
  entities.forEach(hideEntity);
})();
</script>
</body>
</html>
